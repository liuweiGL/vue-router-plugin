!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueRouterPlugin={},e.Vue)}(this,(function(e,t){"use strict";const n=e=>null==e,r=e=>n(e)||""===e,o={keyName:"page_key",componentName:"StackRouterView"};let s;const i=e=>{s=Object.assign(Object.assign({},o),((e,...t)=>{const r={};if(!e||!t)return r;for(const o of t)n(e[o])||(r[o]=e[o]);return r})(e,"keyName","componentName"))},a=()=>s;var u;!function(e){e.PUSH="push",e.GO="go",e.REPLACE="replace",e.BACK="back",e.FORWARD="forward"}(u||(u={}));const c={value:u.PUSH},p=e=>{c.value=e},l=()=>c;let d;const f=()=>d;class m{constructor(e){var t;this.items=null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]}push(e){return this.items.push(e)}pop(){return this.items.pop()}removeAfter(e){const t=this.items.findIndex((t=>t.key===e));if(-1===t)return;const n=t+1;return n>=this.items.length?void 0:this.items.splice(n,this.items.length-t-1)}clear(){const e=this.items;return this.items=[],e}find(e){var t;return null===(t=this.items.find((t=>t.key===e)))||void 0===t?void 0:t.vnode}value(){return this.items}}const h=(()=>{const e=new m;return()=>e})();function v(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}const y=t.defineComponent({inheritRef:!0,__isKeepAlive:!0,props:{component:{type:Object,default:void 0},route:{type:Object,required:!0}},setup(e){const n=h(),r=l(),{keyName:o}=a(),s=t.getCurrentInstance(),i=s.ctx,c=s.suspense,{renderer:{m:p,um:d,o:{createElement:f}}}=i,m=f("div");function y(e){if(e)for(;e.length;){const t=e.pop();t&&(v(t.vnode),d(t.vnode,s,c))}}return i.activate=(e,t,n,r,o)=>{p(e,t,n,0,c)},i.deactivate=e=>{p(e,m,null,1,c)},()=>{const{component:s,route:i}=e,a=i.query[o],c=n.find(a),p=s;return p?c?(y(n.removeAfter(a)),c.transition&&t.setTransitionHooks(c,c.transition),c.shapeFlag|=512,c):(r.value===u.REPLACE&&y(n.clear()),n.push({key:a,vnode:p}),p.shapeFlag|=256,p):p}}}),g=()=>{const{keyName:e}=a(),{router:t}=f(),n=l();t.beforeEach(((t,o)=>{if(r(t.query[e])){t.query[e]=((e=6)=>Math.random().toString(16).substring(2,e+2))();const s=n.value===u.REPLACE||r(o.query[e]);return{hash:t.hash,path:t.path,name:t.name,params:t.params,query:t.query,meta:t.meta,replace:s}}return!0}))},b={install(e,t){const{router:n}=t;if(!n)throw Error("\n vue-router is necessary. \n\n");i(t),d={app:e,router:n},(()=>{const{app:e,router:t}=f(),n=t.push.bind(t),r=t.go.bind(t),o=t.replace.bind(t),s=t.back.bind(t),i=t.forward.bind(t);e.config.globalProperties.$router||e.use(t),t.push=e=>(p(u.PUSH),n(e)),t.go=e=>{p(u.GO),r(e)},t.replace=e=>(p(u.REPLACE),o(e)),t.back=()=>{p(u.BACK),s()},t.forward=()=>{p(u.FORWARD),i()}})(),(()=>{const{componentName:e}=a(),{app:t}=f();t.component(e,y)})(),g()}};e.default=b,e.useAction=l,e.useStack=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=vue-router-plugin.umd.js.map
